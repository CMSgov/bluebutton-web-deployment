# ansible.cfg tailored for an AWS SSM-based workflow

[defaults]
# --- General Settings ---
# Path for roles installed via ansible-galaxy
roles_path = ~/.ansible/roles
# Location for custom modules (often the same as roles_path)
library = ~/.ansible/roles
# Default inventory script to use for local runs. Jenkins overrides this with -i.
inventory = inventory/aws_ec2.yaml
# Enable the necessary inventory plugin
enable_plugins = host_list, script, auto, yaml, ini, toml, amazon.aws.aws_ec2
# Use a more readable callback for command-line output
stdout_callback = yaml
# Let Ansible find the correct python interpreter on the target
interpreter_python = auto_silent
# Default task timeout in seconds
timeout = 120
# Path for playbook logs
log_path = /var/ansible/log/ansible.log
[aws_ssm]
use_s3 = False
bucket_name = bb-test-content-cms-gov

# --- Connection Settings ---
# Set the default connection plugin to aws_ssm.
# This makes local runs easier and is a good default.
# Jenkins may override this with an environment variable.
ansible_connection = amazon.aws.aws_ssm


[privilege_escalation]
# --- Privilege Escalation (become) Settings ---
# These are used when a play or task has 'become: true'
become = true
become_method = sudo
become_user = root
become_ask_pass = false

# -----------------------------------------------------------------------------
# The following sections from the old config have been removed because they
# are not used by the 'amazon.aws.aws_ssm' connection plugin:
#
# [ssh_connection]      -> SSM does not use SSH.
# [persistent_connection] -> SSM does not use persistent SSH connections.
# host_key_checking     -> SSM does not use SSH host keys.
# pipelining            -> Pipelining is an SSH-specific feature.
# -----------------------------------------------------------------------------