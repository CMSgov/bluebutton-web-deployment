# ansible.cfg tailored for an AWS SSM-based workflow

[defaults]
# ... (all your other default settings are fine) ...
roles_path = ~/.ansible/roles
library = ~/.ansible/roles
inventory = inventory/aws_ec2.yaml
enable_plugins = host_list, script, auto, yaml, ini, toml, amazon.aws.aws_ec2
stdout_callback = yaml
interpreter_python = auto_silent
timeout = 120
log_path = /var/ansible/log/ansible.log

[privilege_escalation]
# ... (your privilege escalation settings are fine) ...
become = true
become_method = sudo
become_user = root
become_ask_pass = false

# --- THIS IS THE FIX ---
[ssm_connection]
# Provide the name of a REAL, EXISTING S3 bucket.
# The role assumed by Jenkins needs s3:GetBucketLocation permission on it.
s3_bucket_name = bb-test-content-cms-gov

# Explicitly tell the plugin to NOT use S3 for command output.
# This prevents it from trying to write anything to the bucket.
use_s3 = false